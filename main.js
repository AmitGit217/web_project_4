!function(){"use strict";const e={cardsSection:".elements",cardImagePopup:".popup_image",cardsTemplate:"#card-template",cardClass:".card",cardImageClass:".card__image",cardCaptionClass:".card__caption",cardRemoveButton:".card__removeButton",cardLikeButton:".card__like-button",cardLikeButtonActive:"card__like-button_active"},t=(document.querySelector(".popup__input_addPhoto_caption"),document.querySelector(".popup__input_addPhoto_ImageURL"),document.querySelector("#addImagePopup__form"),document.querySelector("#addImagePopup"),document.querySelector(e.cardsSection)),{cardClass:s,cardImageClass:n,cardCaptionClass:i,cardRemoveButton:o,cardLikeButton:r,cardLikeButtonActive:a}=e;class c{constructor(e,t,i){this._handleClick=i,this._text=e.name,this._link=e.link,this._template=t,this._card=document.querySelector(this._template).content.querySelector(s).cloneNode(!0),this._likeButton=this._card.querySelector(r),this._removeButton=this._card.querySelector(o),this._image=this._card.querySelector(n)}_toggleLike(){this._likeButton.addEventListener("click",(e=>{e.stopPropagation(),this._likeButton.classList.toggle(a)}))}_removeCard(){const e=t=>{t.stopPropagation(),this._card.remove(),this._removeButton.removeEventListener("click",e)};this._removeButton.addEventListener("click",e)}_setEventListeners(){this._toggleLike(),this._removeCard(),this._card.addEventListener("click",(()=>{this._handleClick()}))}generateCard(){return this._image.src=this._link,this._image.alt=this._text,this._card.querySelector(i).textContent=this._text,this._setEventListeners(),this._card}}class l{constructor(e){var t,s;s=e=>{"Escape"===e.key&&this.close()},(t="_handleEscClose")in this?Object.defineProperty(this,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):this[t]=s,this._popup=document.querySelector(e),this._closeButton=this._popup.querySelector(".popup__close-button"),this._isOpen="popup_show"}open(){this._popup.classList.add(this._isOpen),document.addEventListener("keydown",this._handleEscClose)}close(){this._popup.classList.remove(this._isOpen),document.removeEventListener("keydown",this._handleEscClose)}setEventListeners(){this._closeButton.addEventListener("click",(()=>this.close())),this._popup.addEventListener("mousedown",(e=>{e.target===e.currentTarget&&this.close()}))}}class u extends l{constructor(e,t){super(e),this._handleSubmit=t,this._inputs=[...this._popup.querySelectorAll(".popup__input")],this._form=this._popup.querySelector(".form")}close(){super.close(),this._form.reset()}getInputValues(){const e={};return this._inputs.forEach((t=>{e[t.name]=t.value})),e}setInputValues(e){this._inputs.forEach((t=>{t.value=e[t.name]}))}setEventListeners(){super.setEventListeners(),this._popup.addEventListener("submit",(e=>{e.preventDefault(),this._handleSubmit(this.getInputValues())}))}}class p{constructor(e,t){this._settings=e,this._formElement=t,this._submit=this._formElement.querySelector(this._settings.submitButtonSelector),this._inputList=[...this._formElement.querySelectorAll(this._settings.inputSelector)]}_disableButtonState(){this._submit.classList.add(this._settings.inactiveButtonClass),this._submit.setAttribute("disabled",!0)}_enableButtonState(){this._submit.classList.remove(this._settings.inactiveButtonClass),this._submit.removeAttribute("disabled",!0)}_hasInvalidInput(){return this._inputList.some((e=>!e.validity.valid))}_toggleButtonState(){this._hasInvalidInput()?this._disableButtonState():this._enableButtonState()}_resetValidation(){this._disableButtonState(),this._inputList.forEach((e=>{this._hideErrorMessage(e)}))}_showErrorMessage(e){const t=e.validationMessage,s=this._formElement.querySelector(".".concat(e.id,"-error"));s.textContent=t,e.classList.add(this._settings.inputErrorClass),s.classList.add(this._settings.errorClass)}_hideErrorMessage(e){const t=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._settings.inputErrorClass),t.classList.remove(this._settings.errorClass)}_checkInputValidity(e){e.validity.valid?this._hideErrorMessage(e):this._showErrorMessage(e)}_setEventListeners(){this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}enableValidation(){this._toggleButtonState(),this._formElement.addEventListener("submit",(e=>{e.preventDefault(),this._resetValidation()})),this._setEventListeners()}}const{cardsTemplate:_}=e,d=document.querySelector(".profile__add-button"),h=e=>new c(e,_,(()=>{v.open(e)})).generateCard(),m=new class{constructor(e,t){let{data:s,renderer:n}=e;this._items=s,this._renderer=n,this._container=t}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}setItem(e){this._container.append(e)}prependItem(e){this._container.prepend(e)}}({data:[{name:"Yosemite Valley",link:"https://code.s3.yandex.net/web-code/yosemite.jpg"},{name:"Lake Louise",link:"https://code.s3.yandex.net/web-code/lake-louise.jpg"},{name:"Bald Mountains",link:"https://code.s3.yandex.net/web-code/bald-mountains.jpg"},{name:"Latemar",link:"https://code.s3.yandex.net/web-code/latemar.jpg"},{name:"Vanoise National Park",link:"https://code.s3.yandex.net/web-code/vanoise.jpg"},{name:"Lago di Braies",link:"https://code.s3.yandex.net/web-code/lago.jpg"}],renderer:e=>{const t=h(e);m.setItem(t)}},t);m.renderItems();const g=new u("#addImagePopup",(()=>{const{caption:e,image:t}=g.getInputValues(),s=h({name:e,link:t});m.prependItem(s),g.close()})),v=new class extends l{constructor(e){super(e),this._popupImage=document.querySelector(".popup__image"),this._popupCaption=document.querySelector(".popup__caption")}open(e){let{name:t,link:s}=e;this._popupImage.src=s,this._popupImage.alt=t,this._popupCaption.textContent=t,super.open()}}(".popup_image"),b={};var E;E={formSelector:".form",inputSelector:".popup__input",submitButtonSelector:".popup__submit-button",inactiveButtonClass:"popup__submit-button_inactive",inputErrorClass:"popup__input_type_error",errorClass:"popup__input-error_active"},[...document.querySelectorAll(E.formSelector)].forEach((e=>{const t=new p(E,e),s=e.getAttribute("name");b[s]=t,t.enableValidation()}));const L=document.querySelector("#profilePopup__edit-button"),S=new class{constructor(e){let{name:t,job:s}=e;this._name=document.querySelector(t),this._job=document.querySelector(s)}getUserInfo(){return{name:this._name.textContent,job:this._job.textContent}}setUerInfo(e){let{name:t,job:s}=e;this._name.textContent=t,this._job.textContent=s}}({name:".profile__name",job:".profile__description"}),y=new u("#profilePopup",(()=>{const{fullName:e,description:t}=y.getInputValues();S.setUerInfo({name:e,job:t}),y.close()}));d.addEventListener("click",(()=>g.open())),L.addEventListener("click",(()=>{const{name:e,job:t}=S.getUserInfo();y.setInputValues({fullName:e,description:t}),y.open()})),v.setEventListeners(),y.setEventListeners(),g.setEventListeners()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Yy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdGlvbi5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcclxuICB7XHJcbiAgICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS95b3NlbWl0ZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFrZSBMb3Vpc2VcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGFrZS1sb3Vpc2UuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYXRlbWFyXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xhdGVtYXIuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS92YW5vaXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYWdvLmpwZ1wiLFxyXG4gIH0sXHJcbl07XHJcblxyXG5leHBvcnQgY29uc3QgY29uZmlnT2JqZWN0ID0ge1xyXG4gIGZvcm1TZWxlY3RvcjogXCIuZm9ybVwiLFxyXG4gIGlucHV0U2VsZWN0b3I6IFwiLnBvcHVwX19pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5wb3B1cF9fc3VibWl0LWJ1dHRvblwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwicG9wdXBfX3N1Ym1pdC1idXR0b25faW5hY3RpdmVcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwicG9wdXBfX2lucHV0X3R5cGVfZXJyb3JcIixcclxuICBlcnJvckNsYXNzOiBcInBvcHVwX19pbnB1dC1lcnJvcl9hY3RpdmVcIixcclxufTtcclxuZXhwb3J0IGNvbnN0IHBvcHVwU2V0dGluZ3MgPSB7XHJcbiAgaW5wdXRDYXB0aW9uOiBcIi5wb3B1cF9faW5wdXRfYWRkUGhvdG9fY2FwdGlvblwiLFxyXG4gIGlucHV0TGluazogXCIucG9wdXBfX2lucHV0X2FkZFBob3RvX0ltYWdlVVJMXCIsXHJcbiAgY2FyZEZvcm06IFwiI2FkZEltYWdlUG9wdXBfX2Zvcm1cIixcclxuICBhZGRDYXJkUG9wdXA6IFwiI2FkZEltYWdlUG9wdXBcIixcclxufTtcclxuZXhwb3J0IGNvbnN0IGNhcmRTZXR0aW5ncyA9IHtcclxuICBjYXJkc1NlY3Rpb246IFwiLmVsZW1lbnRzXCIsXHJcbiAgY2FyZEltYWdlUG9wdXA6IFwiLnBvcHVwX2ltYWdlXCIsXHJcbiAgY2FyZHNUZW1wbGF0ZTogXCIjY2FyZC10ZW1wbGF0ZVwiLFxyXG4gIGNhcmRDbGFzczogXCIuY2FyZFwiLFxyXG4gIGNhcmRJbWFnZUNsYXNzOiBcIi5jYXJkX19pbWFnZVwiLFxyXG4gIGNhcmRDYXB0aW9uQ2xhc3M6IFwiLmNhcmRfX2NhcHRpb25cIixcclxuICBjYXJkUmVtb3ZlQnV0dG9uOiBcIi5jYXJkX19yZW1vdmVCdXR0b25cIixcclxuICBjYXJkTGlrZUJ1dHRvbjogXCIuY2FyZF9fbGlrZS1idXR0b25cIixcclxuICBjYXJkTGlrZUJ1dHRvbkFjdGl2ZTogXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIixcclxufTtcclxuZXhwb3J0IGNvbnN0IGFkZENhcmRQb3B1cENhcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gIHBvcHVwU2V0dGluZ3MuaW5wdXRDYXB0aW9uXHJcbik7XHJcbmV4cG9ydCBjb25zdCBhZGRDYXJkUG9wdXBVUkwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2V0dGluZ3MuaW5wdXRMaW5rKTtcclxuZXhwb3J0IGNvbnN0IGFkZENhcmRQb3B1cEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2V0dGluZ3MuY2FyZEZvcm0pO1xyXG5leHBvcnQgY29uc3QgYWRkQ2FyZFBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNldHRpbmdzLmFkZENhcmRQb3B1cCk7XHJcbmV4cG9ydCBjb25zdCBjYXJkc1NlY3Rpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNhcmRTZXR0aW5ncy5jYXJkc1NlY3Rpb24pO1xyXG5cclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVJbnB1dHMgPSB7XHJcbiAgbmFtZTogXCIucG9wdXBfX2lucHV0X3R5cGVfbmFtZVwiLFxyXG4gIGpvYjogXCIucG9wdXBfX2lucHV0X3R5cGVfZGVzY3JpcHRpb25cIixcclxufTtcclxuIiwiaW1wb3J0IHsgY2FyZFNldHRpbmdzIH0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50c1wiO1xyXG5jb25zdCB7XHJcbiAgY2FyZENsYXNzLFxyXG4gIGNhcmRJbWFnZUNsYXNzLFxyXG4gIGNhcmRDYXB0aW9uQ2xhc3MsXHJcbiAgY2FyZFJlbW92ZUJ1dHRvbixcclxuICBjYXJkTGlrZUJ1dHRvbixcclxuICBjYXJkTGlrZUJ1dHRvbkFjdGl2ZSxcclxufSA9IGNhcmRTZXR0aW5ncztcclxuZXhwb3J0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKGRhdGEsIHRlbXBsYXRlLCBoYW5kbGVDbGljaykge1xyXG4gICAgdGhpcy5faGFuZGxlQ2xpY2sgPSBoYW5kbGVDbGljaztcclxuICAgIHRoaXMuX3RleHQgPSBkYXRhLm5hbWU7XHJcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xyXG4gICAgdGhpcy5fdGVtcGxhdGUgPSB0ZW1wbGF0ZTtcclxuICAgIHRoaXMuX2NhcmQgPSBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl90ZW1wbGF0ZSlcclxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihjYXJkQ2xhc3MpXHJcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICB0aGlzLl9saWtlQnV0dG9uID0gdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKGNhcmRMaWtlQnV0dG9uKTtcclxuICAgIHRoaXMuX3JlbW92ZUJ1dHRvbiA9IHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcihjYXJkUmVtb3ZlQnV0dG9uKTtcclxuICAgIHRoaXMuX2ltYWdlID0gdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKGNhcmRJbWFnZUNsYXNzKTtcclxuICB9XHJcbiAgX3RvZ2dsZUxpa2UoKSB7XHJcbiAgICB0aGlzLl9saWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xyXG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoY2FyZExpa2VCdXR0b25BY3RpdmUpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfcmVtb3ZlQ2FyZCgpIHtcclxuICAgIGNvbnN0IHJlbW92ZUNhcmQgPSAoZSkgPT4ge1xyXG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICB0aGlzLl9jYXJkLnJlbW92ZSgpO1xyXG4gICAgICB0aGlzLl9yZW1vdmVCdXR0b24ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHJlbW92ZUNhcmQpO1xyXG4gICAgfTtcclxuICAgIHRoaXMuX3JlbW92ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgcmVtb3ZlQ2FyZCk7XHJcbiAgfVxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3RvZ2dsZUxpa2UoKTtcclxuICAgIHRoaXMuX3JlbW92ZUNhcmQoKTtcclxuICAgIHRoaXMuX2NhcmQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlQ2xpY2soKTtcclxuICAgIH0pO1xyXG4gIH1cclxuICBnZW5lcmF0ZUNhcmQoKSB7XHJcbiAgICB0aGlzLl9pbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgdGhpcy5faW1hZ2UuYWx0ID0gdGhpcy5fdGV4dDtcclxuICAgIHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcihjYXJkQ2FwdGlvbkNsYXNzKS50ZXh0Q29udGVudCA9IHRoaXMuX3RleHQ7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgcmV0dXJuIHRoaXMuX2NhcmQ7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fY2xvc2VCdXR0b24gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19jbG9zZS1idXR0b25cIik7XHJcbiAgICB0aGlzLl9pc09wZW4gPSBcInBvcHVwX3Nob3dcIjtcclxuICB9XHJcbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGUpID0+IHtcclxuICAgIGlmIChlLmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgb3BlbigpIHtcclxuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQodGhpcy5faXNPcGVuKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pc09wZW4pO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9jbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5jbG9zZSgpKTtcclxuICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgKGUpID0+IHtcclxuICAgICAgaWYgKGUudGFyZ2V0ID09PSBlLmN1cnJlbnRUYXJnZXQpIHtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBQb3B1cCB9IGZyb20gXCIuL1BvcHVwXCI7XHJcbmV4cG9ydCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZVN1Ym1pdCkge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9oYW5kbGVTdWJtaXQgPSBoYW5kbGVTdWJtaXQ7XHJcbiAgICB0aGlzLl9pbnB1dHMgPSBbLi4udGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvckFsbChcIi5wb3B1cF9faW5wdXRcIildO1xyXG4gICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybVwiKTtcclxuICB9XHJcbiAgY2xvc2UoKSB7XHJcbiAgICBzdXBlci5jbG9zZSgpO1xyXG4gICAgdGhpcy5fZm9ybS5yZXNldCgpO1xyXG4gIH1cclxuICBnZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIGNvbnN0IGlucHV0RGF0YSA9IHt9O1xyXG4gICAgdGhpcy5faW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIGlucHV0RGF0YVtpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gaW5wdXREYXRhO1xyXG4gIH1cclxuICBzZXRJbnB1dFZhbHVlcyhkYXRhKSB7XHJcbiAgICB0aGlzLl9pbnB1dHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgaW5wdXQudmFsdWUgPSBkYXRhW2lucHV0Lm5hbWVdO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9oYW5kbGVTdWJtaXQodGhpcy5nZXRJbnB1dFZhbHVlcygpKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBjb25maWdPYmplY3QgfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzXCI7XHJcbmNsYXNzIEZvcm1WYWxpZGF0aW9uIHtcclxuICBjb25zdHJ1Y3RvcihzZXR0aW5ncywgZm9ybUVsZW1lbnQpIHtcclxuICAgIHRoaXMuX3NldHRpbmdzID0gc2V0dGluZ3M7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xyXG4gICAgdGhpcy5fc3VibWl0ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgdGhpcy5fc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3JcclxuICAgICk7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBbXHJcbiAgICAgIC4uLnRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fc2V0dGluZ3MuaW5wdXRTZWxlY3RvciksXHJcbiAgICBdO1xyXG4gIH1cclxuXHJcbiAgX2Rpc2FibGVCdXR0b25TdGF0ZSgpIHtcclxuICAgIHRoaXMuX3N1Ym1pdC5jbGFzc0xpc3QuYWRkKHRoaXMuX3NldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgdGhpcy5fc3VibWl0LnNldEF0dHJpYnV0ZShcImRpc2FibGVkXCIsIHRydWUpO1xyXG4gIH1cclxuICBfZW5hYmxlQnV0dG9uU3RhdGUoKSB7XHJcbiAgICB0aGlzLl9zdWJtaXQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9zZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIHRoaXMuX3N1Ym1pdC5yZW1vdmVBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCB0cnVlKTtcclxuICB9XHJcbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9pbnB1dExpc3Quc29tZSgoaW5wdXQpID0+IHtcclxuICAgICAgcmV0dXJuICFpbnB1dC52YWxpZGl0eS52YWxpZDtcclxuICAgIH0pO1xyXG4gIH1cclxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XHJcbiAgICB0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKVxyXG4gICAgICA/IHRoaXMuX2Rpc2FibGVCdXR0b25TdGF0ZSgpXHJcbiAgICAgIDogdGhpcy5fZW5hYmxlQnV0dG9uU3RhdGUoKTtcclxuICB9XHJcblxyXG4gIF9yZXNldFZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9kaXNhYmxlQnV0dG9uU3RhdGUoKTtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgdGhpcy5faGlkZUVycm9yTWVzc2FnZShpbnB1dEVsZW1lbnQpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfc2hvd0Vycm9yTWVzc2FnZShpbnB1dCkge1xyXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlID0gaW5wdXQudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dC5pZH0tZXJyb3JgKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcclxuICAgIGlucHV0LmNsYXNzTGlzdC5hZGQodGhpcy5fc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX3NldHRpbmdzLmVycm9yQ2xhc3MpO1xyXG4gIH1cclxuICBfaGlkZUVycm9yTWVzc2FnZShpbnB1dCkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aW5wdXQuaWR9LWVycm9yYCk7XHJcbiAgICBpbnB1dC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3NldHRpbmdzLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9zZXR0aW5ncy5lcnJvckNsYXNzKTtcclxuICB9XHJcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dCkge1xyXG4gICAgaW5wdXQudmFsaWRpdHkudmFsaWRcclxuICAgICAgPyB0aGlzLl9oaWRlRXJyb3JNZXNzYWdlKGlucHV0KVxyXG4gICAgICA6IHRoaXMuX3Nob3dFcnJvck1lc3NhZ2UoaW5wdXQpO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0KTtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5fcmVzZXRWYWxpZGF0aW9uKCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgeyBjb25maWdPYmplY3QsIEZvcm1WYWxpZGF0aW9uIH07XHJcbiIsImltcG9ydCBcIi4vaW5kZXguY3NzXCI7XHJcbmltcG9ydCB7IENhcmQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkXCI7XHJcbmltcG9ydCB7IFNlY3Rpb24gfSBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uXCI7XHJcbmltcG9ydCB7IFVzZXJJbmZvIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm9cIjtcclxuaW1wb3J0IHsgaW5pdGlhbENhcmRzIH0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50c1wiO1xyXG5pbXBvcnQgeyBQb3B1cFdpdGhGb3JtIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybVwiO1xyXG5pbXBvcnQgeyBQb3B1cFdpdGhJbWFnZSB9IGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlXCI7XHJcbmltcG9ydCB7IGNhcmRzU2VjdGlvbiwgY2FyZFNldHRpbmdzIH0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50c1wiO1xyXG5pbXBvcnQgeyBGb3JtVmFsaWRhdGlvbiwgY29uZmlnT2JqZWN0IH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRpb24uanNcIjtcclxuXHJcbi8vQ2FyZCBjcmVhdGlvbiBsb2dpY1xyXG5jb25zdCB7IGNhcmRzVGVtcGxhdGUgfSA9IGNhcmRTZXR0aW5ncztcclxuY29uc3QgYWRkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnV0dG9uXCIpO1xyXG5jb25zdCBjcmVhdGVDYXJkID0gKGl0ZW0pID0+IHtcclxuICBjb25zdCBjYXJkID0gbmV3IENhcmQoaXRlbSwgY2FyZHNUZW1wbGF0ZSwgKCkgPT4ge1xyXG4gICAgaW1hZ2VQb3B1cC5vcGVuKGl0ZW0pO1xyXG4gIH0pO1xyXG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZC5nZW5lcmF0ZUNhcmQoKTtcclxuICByZXR1cm4gY2FyZEVsZW1lbnQ7XHJcbn07XHJcbmNvbnN0IGNhcmRMaXN0ID0gbmV3IFNlY3Rpb24oXHJcbiAge1xyXG4gICAgZGF0YTogaW5pdGlhbENhcmRzLFxyXG4gICAgcmVuZGVyZXI6IChpdGVtKSA9PiB7XHJcbiAgICAgIGNvbnN0IGNhcmQgPSBjcmVhdGVDYXJkKGl0ZW0pO1xyXG4gICAgICBjYXJkTGlzdC5zZXRJdGVtKGNhcmQpO1xyXG4gICAgfSxcclxuICB9LFxyXG4gIGNhcmRzU2VjdGlvblxyXG4pO1xyXG5cclxuY2FyZExpc3QucmVuZGVySXRlbXMoKTtcclxuY29uc3QgYWRkQ2FyZEZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybShcIiNhZGRJbWFnZVBvcHVwXCIsICgpID0+IHtcclxuICBjb25zdCB7IGNhcHRpb24sIGltYWdlIH0gPSBhZGRDYXJkRm9ybS5nZXRJbnB1dFZhbHVlcygpO1xyXG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gY3JlYXRlQ2FyZCh7IG5hbWU6IGNhcHRpb24sIGxpbms6IGltYWdlIH0pO1xyXG4gIGNhcmRMaXN0LnByZXBlbmRJdGVtKGNhcmRFbGVtZW50KTtcclxuICBhZGRDYXJkRm9ybS5jbG9zZSgpO1xyXG59KTtcclxuY29uc3QgaW1hZ2VQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIi5wb3B1cF9pbWFnZVwiKTtcclxuLy9FbmQgb2YgQ2FyZCBsb2dpY1xyXG5cclxuLy9Gb3JtIGxvZ2ljXHJcbmNvbnN0IGZvcm1WYWxpZGF0b3JzID0ge307XHJcbmNvbnN0IGVuYWJsZVZhbGlkYXRpb25zID0gKGNvbmZpZ09iamVjdCkgPT4ge1xyXG4gIGNvbnN0IGZvcm1MaXN0ID0gWy4uLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnT2JqZWN0LmZvcm1TZWxlY3RvcildO1xyXG4gIGZvcm1MaXN0LmZvckVhY2goKGZvcm0pID0+IHtcclxuICAgIGNvbnN0IG5ld0Zvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRpb24oY29uZmlnT2JqZWN0LCBmb3JtKTtcclxuICAgIGNvbnN0IGZvcm1OYW1lID0gZm9ybS5nZXRBdHRyaWJ1dGUoXCJuYW1lXCIpO1xyXG4gICAgZm9ybVZhbGlkYXRvcnNbZm9ybU5hbWVdID0gbmV3Rm9ybVZhbGlkYXRvcjtcclxuICAgIG5ld0Zvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG4gIH0pO1xyXG59O1xyXG5lbmFibGVWYWxpZGF0aW9ucyhjb25maWdPYmplY3QpO1xyXG4vL0VuZCBvZiBGb3JtIGxvZ2ljXHJcblxyXG4vLyBjb25zdCBlZGl0UHJvZmlsZVBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlUG9wdXBcIik7XHJcbmNvbnN0IHByb2ZpbGVFZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlUG9wdXBfX2VkaXQtYnV0dG9uXCIpO1xyXG5cclxuLy9Qcm9maWxlIHBvcHVwICYgVXNlckluZm8gaW1wbGVtZW50YXRpb25cclxuY29uc3QgcHJvZmlsZSA9IG5ldyBVc2VySW5mbyh7XHJcbiAgbmFtZTogXCIucHJvZmlsZV9fbmFtZVwiLFxyXG4gIGpvYjogXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIixcclxufSk7XHJcbmNvbnN0IHByb2ZpbGVGb3JtID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIjcHJvZmlsZVBvcHVwXCIsICgpID0+IHtcclxuICBjb25zdCB7IGZ1bGxOYW1lLCBkZXNjcmlwdGlvbiB9ID0gcHJvZmlsZUZvcm0uZ2V0SW5wdXRWYWx1ZXMoKTtcclxuICBwcm9maWxlLnNldFVlckluZm8oeyBuYW1lOiBmdWxsTmFtZSwgam9iOiBkZXNjcmlwdGlvbiB9KTtcclxuICBwcm9maWxlRm9ybS5jbG9zZSgpO1xyXG59KTtcclxuXHJcbmFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gYWRkQ2FyZEZvcm0ub3BlbigpKTtcclxucHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBjb25zdCB7IG5hbWUsIGpvYiB9ID0gcHJvZmlsZS5nZXRVc2VySW5mbygpO1xyXG4gIHByb2ZpbGVGb3JtLnNldElucHV0VmFsdWVzKHsgZnVsbE5hbWU6IG5hbWUsIGRlc2NyaXB0aW9uOiBqb2IgfSk7XHJcbiAgcHJvZmlsZUZvcm0ub3BlbigpO1xyXG59KTtcclxuXHJcbmltYWdlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxucHJvZmlsZUZvcm0uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuYWRkQ2FyZEZvcm0uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuIiwiZXhwb3J0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgZGF0YSwgcmVuZGVyZXIgfSwgc2VsZWN0ZWRDb250YWluZXIpIHtcclxuICAgIHRoaXMuX2l0ZW1zID0gZGF0YTtcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBzZWxlY3RlZENvbnRhaW5lcjtcclxuICB9XHJcbiAgcmVuZGVySXRlbXMoKSB7XHJcbiAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKChlbGVtZW50KSA9PiB7XHJcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGVsZW1lbnQpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBzZXRJdGVtKGVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5hcHBlbmQoZWxlbWVudCk7XHJcbiAgfVxyXG4gIHByZXBlbmRJdGVtKGVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBQb3B1cCB9IGZyb20gXCIuL1BvcHVwXCI7XHJcbmV4cG9ydCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX3BvcHVwSW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbWFnZVwiKTtcclxuICAgIHRoaXMuX3BvcHVwQ2FwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2NhcHRpb25cIik7XHJcbiAgfVxyXG4gIG9wZW4oeyBuYW1lLCBsaW5rIH0pIHtcclxuICAgIHRoaXMuX3BvcHVwSW1hZ2Uuc3JjID0gbGluaztcclxuICAgIHRoaXMuX3BvcHVwSW1hZ2UuYWx0ID0gbmFtZTtcclxuICAgIHRoaXMuX3BvcHVwQ2FwdGlvbi50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IoeyBuYW1lLCBqb2IgfSkge1xyXG4gICAgdGhpcy5fbmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZSk7XHJcbiAgICB0aGlzLl9qb2IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGpvYik7XHJcbiAgfVxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIHsgbmFtZTogdGhpcy5fbmFtZS50ZXh0Q29udGVudCwgam9iOiB0aGlzLl9qb2IudGV4dENvbnRlbnQgfTtcclxuICB9XHJcbiAgc2V0VWVySW5mbyh7IG5hbWUsIGpvYiB9KSB7XHJcbiAgICB0aGlzLl9uYW1lLnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgIHRoaXMuX2pvYi50ZXh0Q29udGVudCA9IGpvYjtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbImNhcmRTZXR0aW5ncyIsImNhcmRzU2VjdGlvbiIsImNhcmRJbWFnZVBvcHVwIiwiY2FyZHNUZW1wbGF0ZSIsImNhcmRDbGFzcyIsImNhcmRJbWFnZUNsYXNzIiwiY2FyZENhcHRpb25DbGFzcyIsImNhcmRSZW1vdmVCdXR0b24iLCJjYXJkTGlrZUJ1dHRvbiIsImNhcmRMaWtlQnV0dG9uQWN0aXZlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiQ2FyZCIsImNvbnN0cnVjdG9yIiwiZGF0YSIsInRlbXBsYXRlIiwiaGFuZGxlQ2xpY2siLCJ0aGlzIiwiX2hhbmRsZUNsaWNrIiwiX3RleHQiLCJuYW1lIiwiX2xpbmsiLCJsaW5rIiwiX3RlbXBsYXRlIiwiX2NhcmQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2xpa2VCdXR0b24iLCJfcmVtb3ZlQnV0dG9uIiwiX2ltYWdlIiwiX3RvZ2dsZUxpa2UiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsInN0b3BQcm9wYWdhdGlvbiIsImNsYXNzTGlzdCIsInRvZ2dsZSIsIl9yZW1vdmVDYXJkIiwicmVtb3ZlQ2FyZCIsInJlbW92ZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJnZW5lcmF0ZUNhcmQiLCJzcmMiLCJhbHQiLCJ0ZXh0Q29udGVudCIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsImtleSIsImNsb3NlIiwiX3BvcHVwIiwiX2Nsb3NlQnV0dG9uIiwiX2lzT3BlbiIsIm9wZW4iLCJhZGQiLCJfaGFuZGxlRXNjQ2xvc2UiLCJzZXRFdmVudExpc3RlbmVycyIsInRhcmdldCIsImN1cnJlbnRUYXJnZXQiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlU3VibWl0Iiwic3VwZXIiLCJfaGFuZGxlU3VibWl0IiwiX2lucHV0cyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfZm9ybSIsInJlc2V0IiwiZ2V0SW5wdXRWYWx1ZXMiLCJpbnB1dERhdGEiLCJmb3JFYWNoIiwiaW5wdXQiLCJ2YWx1ZSIsInNldElucHV0VmFsdWVzIiwicHJldmVudERlZmF1bHQiLCJGb3JtVmFsaWRhdGlvbiIsInNldHRpbmdzIiwiZm9ybUVsZW1lbnQiLCJfc2V0dGluZ3MiLCJfZm9ybUVsZW1lbnQiLCJfc3VibWl0Iiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5wdXRMaXN0IiwiaW5wdXRTZWxlY3RvciIsIl9kaXNhYmxlQnV0dG9uU3RhdGUiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwic2V0QXR0cmlidXRlIiwiX2VuYWJsZUJ1dHRvblN0YXRlIiwicmVtb3ZlQXR0cmlidXRlIiwiX2hhc0ludmFsaWRJbnB1dCIsInNvbWUiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiX3Jlc2V0VmFsaWRhdGlvbiIsImlucHV0RWxlbWVudCIsIl9oaWRlRXJyb3JNZXNzYWdlIiwiX3Nob3dFcnJvck1lc3NhZ2UiLCJlcnJvck1lc3NhZ2UiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImVycm9yRWxlbWVudCIsImlkIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJlbmFibGVWYWxpZGF0aW9uIiwiYWRkQnV0dG9uIiwiY3JlYXRlQ2FyZCIsIml0ZW0iLCJpbWFnZVBvcHVwIiwiY2FyZExpc3QiLCJzZWxlY3RlZENvbnRhaW5lciIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsInJlbmRlckl0ZW1zIiwiZWxlbWVudCIsInNldEl0ZW0iLCJhcHBlbmQiLCJwcmVwZW5kSXRlbSIsInByZXBlbmQiLCJjYXJkIiwiYWRkQ2FyZEZvcm0iLCJjYXB0aW9uIiwiaW1hZ2UiLCJjYXJkRWxlbWVudCIsIl9wb3B1cEltYWdlIiwiX3BvcHVwQ2FwdGlvbiIsImZvcm1WYWxpZGF0b3JzIiwiY29uZmlnT2JqZWN0IiwiZm9ybVNlbGVjdG9yIiwiZm9ybSIsIm5ld0Zvcm1WYWxpZGF0b3IiLCJmb3JtTmFtZSIsImdldEF0dHJpYnV0ZSIsInByb2ZpbGVFZGl0QnV0dG9uIiwicHJvZmlsZSIsImpvYiIsIl9uYW1lIiwiX2pvYiIsImdldFVzZXJJbmZvIiwic2V0VWVySW5mbyIsInByb2ZpbGVGb3JtIiwiZnVsbE5hbWUiLCJkZXNjcmlwdGlvbiJdLCJzb3VyY2VSb290IjoiIn0=