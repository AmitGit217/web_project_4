!function(){"use strict";const e={cardsSection:".elements",cardImagePopup:".popup_image",cardsTemplate:"#card-template",cardClass:".card",cardImageClass:".card__image",cardCaptionClass:".card__caption",cardRemoveButton:".card__removeButton",cardLikeButton:".card__like-button",cardLikeButtonActive:"card__like-button_active"},t=(document.querySelector(".popup__input_addPhoto_caption"),document.querySelector(".popup__input_addPhoto_ImageURL"),document.querySelector("#addImagePopup__form"),document.querySelector("#addImagePopup"),document.querySelector(e.cardsSection)),{cardClass:s,cardImageClass:n,cardCaptionClass:i,cardRemoveButton:o,cardLikeButton:r,cardLikeButtonActive:a}=e;class c{constructor(e,t,i){this._handleClick=i,this._text=e.name,this._link=e.link,this._template=t,this._card=document.querySelector(this._template).content.querySelector(s).cloneNode(!0),this._likeButton=this._card.querySelector(r),this._removeButton=this._card.querySelector(o),this._image=this._card.querySelector(n)}_toggleLike(){this._likeButton.addEventListener("click",(e=>{e.stopPropagation(),this._likeButton.classList.toggle(a)}))}_removeCard(){const e=t=>{t.stopPropagation(),this._card.remove(),this._removeButton.removeEventListener("click",e)};this._removeButton.addEventListener("click",e)}_setEventListeners(){this._toggleLike(),this._removeCard(),this._card.addEventListener("click",(()=>{this._handleClick()}))}generateCard(){return this._image.src=this._link,this._image.alt=this._text,this._card.querySelector(i).textContent=this._text,this._setEventListeners(),this._card}}class l{constructor(e){var t,s;s=e=>{"Escape"===e.key&&this.close()},(t="_handleEscClose")in this?Object.defineProperty(this,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):this[t]=s,this._popup=document.querySelector(e),this._closeButton=this._popup.querySelector(".popup__close-button"),this._isOpen="popup_show"}open(){this._popup.classList.add(this._isOpen),document.addEventListener("keydown",this._handleEscClose)}close(){this._popup.classList.remove(this._isOpen),document.removeEventListener("keydown",this._handleEscClose)}setEventListeners(){this._closeButton.addEventListener("click",(()=>this.close())),this._popup.addEventListener("mousedown",(e=>{e.target===e.currentTarget&&this.close()}))}}class u extends l{constructor(e,t){super(e),this._handleSubmit=t,this._inputs=[...this._popup.querySelectorAll(".popup__input")],this._form=this._popup.querySelector(".form")}close(){super.close(),this._form.reset()}getInputValues(){const e={};return this._inputs.forEach((t=>{e[t.name]=t.value})),e}setInputValues(e){this._inputs.forEach((t=>{t.value=e[t.name]}))}setEventListeners(){super.setEventListeners(),this._popup.addEventListener("submit",(e=>{e.preventDefault(),this._handleSubmit(this.getInputValues())}))}}class p{constructor(e,t){this._settings=e,this._formElement=t,this._submit=this._formElement.querySelector(this._settings.submitButtonSelector),this._inputList=[...this._formElement.querySelectorAll(this._settings.inputSelector)]}_disableButtonState(){this._submit.classList.add(this._settings.inactiveButtonClass),this._submit.setAttribute("disabled",!0)}_enableButtonState(){this._submit.classList.remove(this._settings.inactiveButtonClass),this._submit.removeAttribute("disabled",!0)}_hasInvalidInput(){return this._inputList.some((e=>!e.validity.valid))}_toggleButtonState(){this._hasInvalidInput()?this._disableButtonState():this._enableButtonState()}_resetValidation(){this._disableButtonState(),this._inputList.forEach((e=>{this._hideErrorMessage(e)}))}_showErrorMessage(e){const t=e.validationMessage,s=this._formElement.querySelector(".".concat(e.id,"-error"));s.textContent=t,e.classList.add(this._settings.inputErrorClass),s.classList.add(this._settings.errorClass)}_hideErrorMessage(e){const t=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._settings.inputErrorClass),t.classList.remove(this._settings.errorClass)}_checkInputValidity(e){e.validity.valid?this._hideErrorMessage(e):this._showErrorMessage(e)}_setEventListeners(){this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}enableValidation(){this._toggleButtonState(),this._formElement.addEventListener("submit",(e=>{e.preventDefault(),this._resetValidation()})),this._setEventListeners()}}const{cardsTemplate:_}=e,d=document.querySelector(".profile__add-button"),h=e=>new c(e,_,(()=>{v.open(e)})).generateCard(),m=new class{constructor(e,t){let{data:s,renderer:n}=e;this._items=s,this._renderer=n,this._container=t}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}setItem(e){this._container.append(e)}prependItem(e){this._container.prepend(e)}}({data:[{name:"Yosemite Valley",link:"https://code.s3.yandex.net/web-code/yosemite.jpg"},{name:"Lake Louise",link:"https://code.s3.yandex.net/web-code/lake-louise.jpg"},{name:"Bald Mountains",link:"https://code.s3.yandex.net/web-code/bald-mountains.jpg"},{name:"Latemar",link:"https://code.s3.yandex.net/web-code/latemar.jpg"},{name:"Vanoise National Park",link:"https://code.s3.yandex.net/web-code/vanoise.jpg"},{name:"Lago di Braies",link:"https://code.s3.yandex.net/web-code/lago.jpg"}],renderer:e=>{const t=h(e);m.setItem(t)}},t);m.renderItems();const g=new u("#addImagePopup",(()=>{const{caption:e,image:t}=g.getInputValues(),s=h({name:e,link:t});m.prependItem(s),g.close()})),v=new class extends l{constructor(e){super(e),this._popupImage=document.querySelector(".popup__image"),this._popupCaption=document.querySelector(".popup__caption")}open(e){let{name:t,link:s}=e;this._popupImage.src=s,this._popupImage.alt=t,this._popupCaption.textContent=t,super.open()}}(".popup_image"),b={};var E;E={formSelector:".form",inputSelector:".popup__input",submitButtonSelector:".popup__submit-button",inactiveButtonClass:"popup__submit-button_inactive",inputErrorClass:"popup__input_type_error",errorClass:"popup__input-error_active"},[...document.querySelectorAll(E.formSelector)].forEach((e=>{const t=new p(E,e),s=e.getAttribute("name");b[s]=t,t.enableValidation()}));const L=document.querySelector("#profilePopup__edit-button"),S=new class{constructor(e){let{name:t,job:s}=e;this._name=document.querySelector(t),this._job=document.querySelector(s)}getUserInfo(){return{name:this._name.textContent,job:this._job.textContent}}setUerInfo(e){let{name:t,job:s}=e;this._name.textContent=t,this._job.textContent=s}}({name:".profile__name",job:".profile__description"}),y=new u("#profilePopup",(()=>{const{fullName:e,description:t}=y.getInputValues();S.setUerInfo({name:e,job:t}),y.close()}));d.addEventListener("click",(()=>g.open())),L.addEventListener("click",(()=>{const{name:e,job:t}=S.getUserInfo();y.setInputValues({fullName:e,description:t}),y.open()})),v.setEventListeners(),y.setEventListeners(),g.setEventListeners()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoieUJBQU8sTUF5Q01BLEVBQWUsQ0FDMUJDLGFBQWMsWUFDZEMsZUFBZ0IsZUFDaEJDLGNBQWUsaUJBQ2ZDLFVBQVcsUUFDWEMsZUFBZ0IsZUFDaEJDLGlCQUFrQixpQkFDbEJDLGlCQUFrQixzQkFDbEJDLGVBQWdCLHFCQUNoQkMscUJBQXNCLDRCQVFYUixHQU5zQlMsU0FBU0MsY0FoQjVCLGtDQW1CZUQsU0FBU0MsY0FsQjNCLG1DQW1CbUJELFNBQVNDLGNBbEI3Qix3QkFtQmdCRCxTQUFTQyxjQWxCckIsa0JBbUJZRCxTQUFTQyxjQUFjWCxFQUFhQyxnQkN6RDFELFVBQ0pHLEVBREksZUFFSkMsRUFGSSxpQkFHSkMsRUFISSxpQkFJSkMsRUFKSSxlQUtKQyxFQUxJLHFCQU1KQyxHQUNFVCxFQUNHLE1BQU1ZLEVBQ1hDLFlBQVlDLEVBQU1DLEVBQVVDLEdBQzFCQyxLQUFLQyxhQUFlRixFQUNwQkMsS0FBS0UsTUFBUUwsRUFBS00sS0FDbEJILEtBQUtJLE1BQVFQLEVBQUtRLEtBQ2xCTCxLQUFLTSxVQUFZUixFQUNqQkUsS0FBS08sTUFBUWQsU0FDVkMsY0FBY00sS0FBS00sV0FDbkJFLFFBQVFkLGNBQWNQLEdBQ3RCc0IsV0FBVSxHQUNiVCxLQUFLVSxZQUFjVixLQUFLTyxNQUFNYixjQUFjSCxHQUM1Q1MsS0FBS1csY0FBZ0JYLEtBQUtPLE1BQU1iLGNBQWNKLEdBQzlDVSxLQUFLWSxPQUFTWixLQUFLTyxNQUFNYixjQUFjTixHQUV6Q3lCLGNBQ0ViLEtBQUtVLFlBQVlJLGlCQUFpQixTQUFVQyxJQUMxQ0EsRUFBRUMsa0JBQ0ZoQixLQUFLVSxZQUFZTyxVQUFVQyxPQUFPMUIsTUFJdEMyQixjQUNFLE1BQU1DLEVBQWNMLElBQ2xCQSxFQUFFQyxrQkFDRmhCLEtBQUtPLE1BQU1jLFNBQ1hyQixLQUFLVyxjQUFjVyxvQkFBb0IsUUFBU0YsSUFFbERwQixLQUFLVyxjQUFjRyxpQkFBaUIsUUFBU00sR0FFL0NHLHFCQUNFdkIsS0FBS2EsY0FDTGIsS0FBS21CLGNBQ0xuQixLQUFLTyxNQUFNTyxpQkFBaUIsU0FBUyxLQUNuQ2QsS0FBS0Msa0JBR1R1QixlQUtFLE9BSkF4QixLQUFLWSxPQUFPYSxJQUFNekIsS0FBS0ksTUFDdkJKLEtBQUtZLE9BQU9jLElBQU0xQixLQUFLRSxNQUN2QkYsS0FBS08sTUFBTWIsY0FBY0wsR0FBa0JzQyxZQUFjM0IsS0FBS0UsTUFDOURGLEtBQUt1QixxQkFDRXZCLEtBQUtPLE9DbERULE1BQU1xQixFQUNYaEMsWUFBWWlDLEcsVUFLT2QsSUFDSCxXQUFWQSxFQUFFZSxLQUNKOUIsS0FBSytCLFUsRUFQa0IsMEIsc0JBQUEsSyx1REFBQSxLLEtBQ3pCL0IsS0FBS2dDLE9BQVN2QyxTQUFTQyxjQUFjbUMsR0FDckM3QixLQUFLaUMsYUFBZWpDLEtBQUtnQyxPQUFPdEMsY0FBYyx3QkFDOUNNLEtBQUtrQyxRQUFVLGFBUWpCQyxPQUNFbkMsS0FBS2dDLE9BQU9mLFVBQVVtQixJQUFJcEMsS0FBS2tDLFNBQy9CekMsU0FBU3FCLGlCQUFpQixVQUFXZCxLQUFLcUMsaUJBRzVDTixRQUNFL0IsS0FBS2dDLE9BQU9mLFVBQVVJLE9BQU9yQixLQUFLa0MsU0FDbEN6QyxTQUFTNkIsb0JBQW9CLFVBQVd0QixLQUFLcUMsaUJBRy9DQyxvQkFDRXRDLEtBQUtpQyxhQUFhbkIsaUJBQWlCLFNBQVMsSUFBTWQsS0FBSytCLFVBQ3ZEL0IsS0FBS2dDLE9BQU9sQixpQkFBaUIsYUFBY0MsSUFDckNBLEVBQUV3QixTQUFXeEIsRUFBRXlCLGVBQ2pCeEMsS0FBSytCLFlDekJOLE1BQU1VLFVBQXNCYixFQUNqQ2hDLFlBQVlpQyxFQUFlYSxHQUN6QkMsTUFBTWQsR0FDTjdCLEtBQUs0QyxjQUFnQkYsRUFDckIxQyxLQUFLNkMsUUFBVSxJQUFJN0MsS0FBS2dDLE9BQU9jLGlCQUFpQixrQkFDaEQ5QyxLQUFLK0MsTUFBUS9DLEtBQUtnQyxPQUFPdEMsY0FBYyxTQUV6Q3FDLFFBQ0VZLE1BQU1aLFFBQ04vQixLQUFLK0MsTUFBTUMsUUFFYkMsaUJBQ0UsTUFBTUMsRUFBWSxHQUlsQixPQUhBbEQsS0FBSzZDLFFBQVFNLFNBQVNDLElBQ3BCRixFQUFVRSxFQUFNakQsTUFBUWlELEVBQU1DLFNBRXpCSCxFQUVUSSxlQUFlekQsR0FDYkcsS0FBSzZDLFFBQVFNLFNBQVNDLElBQ3BCQSxFQUFNQyxNQUFReEQsRUFBS3VELEVBQU1qRCxTQUc3Qm1DLG9CQUNFSyxNQUFNTCxvQkFDTnRDLEtBQUtnQyxPQUFPbEIsaUJBQWlCLFVBQVdDLElBQ3RDQSxFQUFFd0MsaUJBQ0Z2RCxLQUFLNEMsY0FBYzVDLEtBQUtpRCxzQkMzQjlCLE1BQU1PLEVBQ0o1RCxZQUFZNkQsRUFBVUMsR0FDcEIxRCxLQUFLMkQsVUFBWUYsRUFDakJ6RCxLQUFLNEQsYUFBZUYsRUFDcEIxRCxLQUFLNkQsUUFBVTdELEtBQUs0RCxhQUFhbEUsY0FDL0JNLEtBQUsyRCxVQUFVRyxzQkFFakI5RCxLQUFLK0QsV0FBYSxJQUNiL0QsS0FBSzRELGFBQWFkLGlCQUFpQjlDLEtBQUsyRCxVQUFVSyxnQkFJekRDLHNCQUNFakUsS0FBSzZELFFBQVE1QyxVQUFVbUIsSUFBSXBDLEtBQUsyRCxVQUFVTyxxQkFDMUNsRSxLQUFLNkQsUUFBUU0sYUFBYSxZQUFZLEdBRXhDQyxxQkFDRXBFLEtBQUs2RCxRQUFRNUMsVUFBVUksT0FBT3JCLEtBQUsyRCxVQUFVTyxxQkFDN0NsRSxLQUFLNkQsUUFBUVEsZ0JBQWdCLFlBQVksR0FFM0NDLG1CQUNFLE9BQU90RSxLQUFLK0QsV0FBV1EsTUFBTW5CLElBQ25CQSxFQUFNb0IsU0FBU0MsUUFHM0JDLHFCQUNFMUUsS0FBS3NFLG1CQUNEdEUsS0FBS2lFLHNCQUNMakUsS0FBS29FLHFCQUdYTyxtQkFDRTNFLEtBQUtpRSxzQkFDTGpFLEtBQUsrRCxXQUFXWixTQUFTeUIsSUFDdkI1RSxLQUFLNkUsa0JBQWtCRCxNQUkzQkUsa0JBQWtCMUIsR0FDaEIsTUFBTTJCLEVBQWUzQixFQUFNNEIsa0JBQ3JCQyxFQUFlakYsS0FBSzRELGFBQWFsRSxjQUFsQixXQUFvQzBELEVBQU04QixHQUExQyxXQUNyQkQsRUFBYXRELFlBQWNvRCxFQUMzQjNCLEVBQU1uQyxVQUFVbUIsSUFBSXBDLEtBQUsyRCxVQUFVd0IsaUJBQ25DRixFQUFhaEUsVUFBVW1CLElBQUlwQyxLQUFLMkQsVUFBVXlCLFlBRTVDUCxrQkFBa0J6QixHQUNoQixNQUFNNkIsRUFBZWpGLEtBQUs0RCxhQUFhbEUsY0FBbEIsV0FBb0MwRCxFQUFNOEIsR0FBMUMsV0FDckI5QixFQUFNbkMsVUFBVUksT0FBT3JCLEtBQUsyRCxVQUFVd0IsaUJBQ3RDRixFQUFhaEUsVUFBVUksT0FBT3JCLEtBQUsyRCxVQUFVeUIsWUFFL0NDLG9CQUFvQmpDLEdBQ2xCQSxFQUFNb0IsU0FBU0MsTUFDWHpFLEtBQUs2RSxrQkFBa0J6QixHQUN2QnBELEtBQUs4RSxrQkFBa0IxQixHQUc3QjdCLHFCQUNFdkIsS0FBSytELFdBQVdaLFNBQVNDLElBQ3ZCQSxFQUFNdEMsaUJBQWlCLFNBQVMsS0FDOUJkLEtBQUtxRixvQkFBb0JqQyxHQUN6QnBELEtBQUswRSwyQkFLWFksbUJBQ0V0RixLQUFLMEUscUJBQ0wxRSxLQUFLNEQsYUFBYTlDLGlCQUFpQixVQUFXQyxJQUM1Q0EsRUFBRXdDLGlCQUNGdkQsS0FBSzJFLHNCQUVQM0UsS0FBS3VCLHNCQzdEVCxNQUFNLGNBQUVyQyxHQUFrQkgsRUFDcEJ3RyxFQUFZOUYsU0FBU0MsY0FBYyx3QkFDbkM4RixFQUFjQyxHQUNMLElBQUk5RixFQUFLOEYsRUFBTXZHLEdBQWUsS0FDekN3RyxFQUFXdkQsS0FBS3NELE1BRU9qRSxlQUdyQm1FLEVBQVcsSUNwQlYsTUFDTC9GLFlBQVksRUFBb0JnRyxHQUFtQixJQUF2QyxLQUFFL0YsRUFBRixTQUFRZ0csR0FBK0IsRUFDakQ3RixLQUFLOEYsT0FBU2pHLEVBQ2RHLEtBQUsrRixVQUFZRixFQUNqQjdGLEtBQUtnRyxXQUFhSixFQUVwQkssY0FDRWpHLEtBQUs4RixPQUFPM0MsU0FBUytDLElBQ25CbEcsS0FBSytGLFVBQVVHLE1BSW5CQyxRQUFRRCxHQUNObEcsS0FBS2dHLFdBQVdJLE9BQU9GLEdBRXpCRyxZQUFZSCxHQUNWbEcsS0FBS2dHLFdBQVdNLFFBQVFKLEtESzFCLENBQ0VyRyxLTHRCd0IsQ0FDMUIsQ0FDRU0sS0FBTSxrQkFDTkUsS0FBTSxvREFFUixDQUNFRixLQUFNLGNBQ05FLEtBQU0sdURBRVIsQ0FDRUYsS0FBTSxpQkFDTkUsS0FBTSwwREFFUixDQUNFRixLQUFNLFVBQ05FLEtBQU0sbURBRVIsQ0FDRUYsS0FBTSx3QkFDTkUsS0FBTSxtREFFUixDQUNFRixLQUFNLGlCQUNORSxLQUFNLGlES0FOd0YsU0FBV0osSUFDVCxNQUFNYyxFQUFPZixFQUFXQyxHQUN4QkUsRUFBU1EsUUFBUUksS0FHckJ2SCxHQUVGMkcsRUFBU00sY0FDVCxNQUFNTyxFQUFjLElBQUkvRCxFQUFjLGtCQUFrQixLQUN0RCxNQUFNLFFBQUVnRSxFQUFGLE1BQVdDLEdBQVVGLEVBQVl2RCxpQkFDakMwRCxFQUFjbkIsRUFBVyxDQUFFckYsS0FBTXNHLEVBQVNwRyxLQUFNcUcsSUFDdERmLEVBQVNVLFlBQVlNLEdBQ3JCSCxFQUFZekUsV0FFUjJELEVBQWEsSUVwQ1osY0FBNkI5RCxFQUNsQ2hDLFlBQVlpQyxHQUNWYyxNQUFNZCxHQUNON0IsS0FBSzRHLFlBQWNuSCxTQUFTQyxjQUFjLGlCQUMxQ00sS0FBSzZHLGNBQWdCcEgsU0FBU0MsY0FBYyxtQkFFOUN5QyxLQUFLLEdBQWdCLElBQWhCLEtBQUVoQyxFQUFGLEtBQVFFLEdBQVEsRUFDbkJMLEtBQUs0RyxZQUFZbkYsSUFBTXBCLEVBQ3ZCTCxLQUFLNEcsWUFBWWxGLElBQU12QixFQUN2QkgsS0FBSzZHLGNBQWNsRixZQUFjeEIsRUFDakN3QyxNQUFNUixTRjBCNEIsZ0JBSWhDMkUsRUFBaUIsR0FDSUMsUUxmQyxDQUMxQkMsYUFBYyxRQUNkaEQsY0FBZSxnQkFDZkYscUJBQXNCLHdCQUN0Qkksb0JBQXFCLGdDQUNyQmlCLGdCQUFpQiwwQkFDakJDLFdBQVksNkJLVUssSUFBSTNGLFNBQVNxRCxpQkFBaUJpRSxFQUFhQyxlQUNuRDdELFNBQVM4RCxJQUNoQixNQUFNQyxFQUFtQixJQUFJMUQsRUFBZXVELEVBQWNFLEdBQ3BERSxFQUFXRixFQUFLRyxhQUFhLFFBQ25DTixFQUFlSyxHQUFZRCxFQUMzQkEsRUFBaUI1QixzQkFPckIsTUFBTStCLEVBQW9CNUgsU0FBU0MsY0FBYyw4QkFHM0M0SCxFQUFVLElHMURULE1BQ0wxSCxZQUFZLEdBQWUsSUFBZixLQUFFTyxFQUFGLElBQVFvSCxHQUFPLEVBQ3pCdkgsS0FBS3dILE1BQVEvSCxTQUFTQyxjQUFjUyxHQUNwQ0gsS0FBS3lILEtBQU9oSSxTQUFTQyxjQUFjNkgsR0FFckNHLGNBQ0UsTUFBTyxDQUFFdkgsS0FBTUgsS0FBS3dILE1BQU03RixZQUFhNEYsSUFBS3ZILEtBQUt5SCxLQUFLOUYsYUFFeERnRyxXQUFXLEdBQWUsSUFBZixLQUFFeEgsRUFBRixJQUFRb0gsR0FBTyxFQUN4QnZILEtBQUt3SCxNQUFNN0YsWUFBY3hCLEVBQ3pCSCxLQUFLeUgsS0FBSzlGLFlBQWM0RixJSGdEQyxDQUMzQnBILEtBQU0saUJBQ05vSCxJQUFLLDBCQUVESyxFQUFjLElBQUluRixFQUFjLGlCQUFpQixLQUNyRCxNQUFNLFNBQUVvRixFQUFGLFlBQVlDLEdBQWdCRixFQUFZM0UsaUJBQzlDcUUsRUFBUUssV0FBVyxDQUFFeEgsS0FBTTBILEVBQVVOLElBQUtPLElBQzFDRixFQUFZN0YsV0FHZHdELEVBQVV6RSxpQkFBaUIsU0FBUyxJQUFNMEYsRUFBWXJFLFNBQ3REa0YsRUFBa0J2RyxpQkFBaUIsU0FBUyxLQUMxQyxNQUFNLEtBQUVYLEVBQUYsSUFBUW9ILEdBQVFELEVBQVFJLGNBQzlCRSxFQUFZdEUsZUFBZSxDQUFFdUUsU0FBVTFILEVBQU0ySCxZQUFhUCxJQUMxREssRUFBWXpGLFVBR2R1RCxFQUFXcEQsb0JBQ1hzRixFQUFZdEYsb0JBQ1prRSxFQUFZbEUsb0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0aW9uLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xyXG4gIHtcclxuICAgIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL3lvc2VtaXRlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYWtlLWxvdWlzZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvYmFsZC1tb3VudGFpbnMuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGF0ZW1hci5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL3Zhbm9pc2UuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xhZ28uanBnXCIsXHJcbiAgfSxcclxuXTtcclxuXHJcbmV4cG9ydCBjb25zdCBjb25maWdPYmplY3QgPSB7XHJcbiAgZm9ybVNlbGVjdG9yOiBcIi5mb3JtXCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIucG9wdXBfX2lucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLnBvcHVwX19zdWJtaXQtYnV0dG9uXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJwb3B1cF9fc3VibWl0LWJ1dHRvbl9pbmFjdGl2ZVwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJwb3B1cF9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwicG9wdXBfX2lucHV0LWVycm9yX2FjdGl2ZVwiLFxyXG59O1xyXG5leHBvcnQgY29uc3QgcG9wdXBTZXR0aW5ncyA9IHtcclxuICBpbnB1dENhcHRpb246IFwiLnBvcHVwX19pbnB1dF9hZGRQaG90b19jYXB0aW9uXCIsXHJcbiAgaW5wdXRMaW5rOiBcIi5wb3B1cF9faW5wdXRfYWRkUGhvdG9fSW1hZ2VVUkxcIixcclxuICBjYXJkRm9ybTogXCIjYWRkSW1hZ2VQb3B1cF9fZm9ybVwiLFxyXG4gIGFkZENhcmRQb3B1cDogXCIjYWRkSW1hZ2VQb3B1cFwiLFxyXG59O1xyXG5leHBvcnQgY29uc3QgY2FyZFNldHRpbmdzID0ge1xyXG4gIGNhcmRzU2VjdGlvbjogXCIuZWxlbWVudHNcIixcclxuICBjYXJkSW1hZ2VQb3B1cDogXCIucG9wdXBfaW1hZ2VcIixcclxuICBjYXJkc1RlbXBsYXRlOiBcIiNjYXJkLXRlbXBsYXRlXCIsXHJcbiAgY2FyZENsYXNzOiBcIi5jYXJkXCIsXHJcbiAgY2FyZEltYWdlQ2xhc3M6IFwiLmNhcmRfX2ltYWdlXCIsXHJcbiAgY2FyZENhcHRpb25DbGFzczogXCIuY2FyZF9fY2FwdGlvblwiLFxyXG4gIGNhcmRSZW1vdmVCdXR0b246IFwiLmNhcmRfX3JlbW92ZUJ1dHRvblwiLFxyXG4gIGNhcmRMaWtlQnV0dG9uOiBcIi5jYXJkX19saWtlLWJ1dHRvblwiLFxyXG4gIGNhcmRMaWtlQnV0dG9uQWN0aXZlOiBcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiLFxyXG59O1xyXG5leHBvcnQgY29uc3QgYWRkQ2FyZFBvcHVwQ2FwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgcG9wdXBTZXR0aW5ncy5pbnB1dENhcHRpb25cclxuKTtcclxuZXhwb3J0IGNvbnN0IGFkZENhcmRQb3B1cFVSTCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZXR0aW5ncy5pbnB1dExpbmspO1xyXG5leHBvcnQgY29uc3QgYWRkQ2FyZFBvcHVwRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZXR0aW5ncy5jYXJkRm9ybSk7XHJcbmV4cG9ydCBjb25zdCBhZGRDYXJkUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2V0dGluZ3MuYWRkQ2FyZFBvcHVwKTtcclxuZXhwb3J0IGNvbnN0IGNhcmRzU2VjdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY2FyZFNldHRpbmdzLmNhcmRzU2VjdGlvbik7XHJcblxyXG5leHBvcnQgY29uc3QgcHJvZmlsZUlucHV0cyA9IHtcclxuICBuYW1lOiBcIi5wb3B1cF9faW5wdXRfdHlwZV9uYW1lXCIsXHJcbiAgam9iOiBcIi5wb3B1cF9faW5wdXRfdHlwZV9kZXNjcmlwdGlvblwiLFxyXG59O1xyXG4iLCJpbXBvcnQgeyBjYXJkU2V0dGluZ3MgfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzXCI7XHJcbmNvbnN0IHtcclxuICBjYXJkQ2xhc3MsXHJcbiAgY2FyZEltYWdlQ2xhc3MsXHJcbiAgY2FyZENhcHRpb25DbGFzcyxcclxuICBjYXJkUmVtb3ZlQnV0dG9uLFxyXG4gIGNhcmRMaWtlQnV0dG9uLFxyXG4gIGNhcmRMaWtlQnV0dG9uQWN0aXZlLFxyXG59ID0gY2FyZFNldHRpbmdzO1xyXG5leHBvcnQgY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoZGF0YSwgdGVtcGxhdGUsIGhhbmRsZUNsaWNrKSB7XHJcbiAgICB0aGlzLl9oYW5kbGVDbGljayA9IGhhbmRsZUNsaWNrO1xyXG4gICAgdGhpcy5fdGV4dCA9IGRhdGEubmFtZTtcclxuICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XHJcbiAgICB0aGlzLl90ZW1wbGF0ZSA9IHRlbXBsYXRlO1xyXG4gICAgdGhpcy5fY2FyZCA9IGRvY3VtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX3RlbXBsYXRlKVxyXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKGNhcmRDbGFzcylcclxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuICAgIHRoaXMuX2xpa2VCdXR0b24gPSB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoY2FyZExpa2VCdXR0b24pO1xyXG4gICAgdGhpcy5fcmVtb3ZlQnV0dG9uID0gdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKGNhcmRSZW1vdmVCdXR0b24pO1xyXG4gICAgdGhpcy5faW1hZ2UgPSB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoY2FyZEltYWdlQ2xhc3MpO1xyXG4gIH1cclxuICBfdG9nZ2xlTGlrZSgpIHtcclxuICAgIHRoaXMuX2xpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XHJcbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZShjYXJkTGlrZUJ1dHRvbkFjdGl2ZSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF9yZW1vdmVDYXJkKCkge1xyXG4gICAgY29uc3QgcmVtb3ZlQ2FyZCA9IChlKSA9PiB7XHJcbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgIHRoaXMuX2NhcmQucmVtb3ZlKCk7XHJcbiAgICAgIHRoaXMuX3JlbW92ZUJ1dHRvbi5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgcmVtb3ZlQ2FyZCk7XHJcbiAgICB9O1xyXG4gICAgdGhpcy5fcmVtb3ZlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCByZW1vdmVDYXJkKTtcclxuICB9XHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fdG9nZ2xlTGlrZSgpO1xyXG4gICAgdGhpcy5fcmVtb3ZlQ2FyZCgpO1xyXG4gICAgdGhpcy5fY2FyZC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVDbGljaygpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIGdlbmVyYXRlQ2FyZCgpIHtcclxuICAgIHRoaXMuX2ltYWdlLnNyYyA9IHRoaXMuX2xpbms7XHJcbiAgICB0aGlzLl9pbWFnZS5hbHQgPSB0aGlzLl90ZXh0O1xyXG4gICAgdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKGNhcmRDYXB0aW9uQ2xhc3MpLnRleHRDb250ZW50ID0gdGhpcy5fdGV4dDtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICByZXR1cm4gdGhpcy5fY2FyZDtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9jbG9zZUJ1dHRvbiA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Nsb3NlLWJ1dHRvblwiKTtcclxuICAgIHRoaXMuX2lzT3BlbiA9IFwicG9wdXBfc2hvd1wiO1xyXG4gIH1cclxuICBfaGFuZGxlRXNjQ2xvc2UgPSAoZSkgPT4ge1xyXG4gICAgaWYgKGUua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZCh0aGlzLl9pc09wZW4pO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lzT3Blbik7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2Nsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLmNsb3NlKCkpO1xyXG4gICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCAoZSkgPT4ge1xyXG4gICAgICBpZiAoZS50YXJnZXQgPT09IGUuY3VycmVudFRhcmdldCkge1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IFBvcHVwIH0gZnJvbSBcIi4vUG9wdXBcIjtcclxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlU3VibWl0KSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCA9IGhhbmRsZVN1Ym1pdDtcclxuICAgIHRoaXMuX2lucHV0cyA9IFsuLi50aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yQWxsKFwiLnBvcHVwX19pbnB1dFwiKV07XHJcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5mb3JtXCIpO1xyXG4gIH1cclxuICBjbG9zZSgpIHtcclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XHJcbiAgfVxyXG4gIGdldElucHV0VmFsdWVzKCkge1xyXG4gICAgY29uc3QgaW5wdXREYXRhID0ge307XHJcbiAgICB0aGlzLl9pbnB1dHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgaW5wdXREYXRhW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBpbnB1dERhdGE7XHJcbiAgfVxyXG4gIHNldElucHV0VmFsdWVzKGRhdGEpIHtcclxuICAgIHRoaXMuX2lucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICBpbnB1dC52YWx1ZSA9IGRhdGFbaW5wdXQubmFtZV07XHJcbiAgICB9KTtcclxuICB9XHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCh0aGlzLmdldElucHV0VmFsdWVzKCkpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IGNvbmZpZ09iamVjdCB9IGZyb20gXCIuLi91dGlscy9jb25zdGFudHNcIjtcclxuY2xhc3MgRm9ybVZhbGlkYXRpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtRWxlbWVudCkge1xyXG4gICAgdGhpcy5fc2V0dGluZ3MgPSBzZXR0aW5ncztcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XHJcbiAgICB0aGlzLl9zdWJtaXQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICB0aGlzLl9zZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvclxyXG4gICAgKTtcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IFtcclxuICAgICAgLi4udGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9zZXR0aW5ncy5pbnB1dFNlbGVjdG9yKSxcclxuICAgIF07XHJcbiAgfVxyXG5cclxuICBfZGlzYWJsZUJ1dHRvblN0YXRlKCkge1xyXG4gICAgdGhpcy5fc3VibWl0LmNsYXNzTGlzdC5hZGQodGhpcy5fc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB0aGlzLl9zdWJtaXQuc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgdHJ1ZSk7XHJcbiAgfVxyXG4gIF9lbmFibGVCdXR0b25TdGF0ZSgpIHtcclxuICAgIHRoaXMuX3N1Ym1pdC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3NldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgdGhpcy5fc3VibWl0LnJlbW92ZUF0dHJpYnV0ZShcImRpc2FibGVkXCIsIHRydWUpO1xyXG4gIH1cclxuICBfaGFzSW52YWxpZElucHV0KCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dCkgPT4ge1xyXG4gICAgICByZXR1cm4gIWlucHV0LnZhbGlkaXR5LnZhbGlkO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcclxuICAgIHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpXHJcbiAgICAgID8gdGhpcy5fZGlzYWJsZUJ1dHRvblN0YXRlKClcclxuICAgICAgOiB0aGlzLl9lbmFibGVCdXR0b25TdGF0ZSgpO1xyXG4gIH1cclxuXHJcbiAgX3Jlc2V0VmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX2Rpc2FibGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICB0aGlzLl9oaWRlRXJyb3JNZXNzYWdlKGlucHV0RWxlbWVudCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF9zaG93RXJyb3JNZXNzYWdlKGlucHV0KSB7XHJcbiAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBpbnB1dC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0LmlkfS1lcnJvcmApO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xyXG4gICAgaW5wdXQuY2xhc3NMaXN0LmFkZCh0aGlzLl9zZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fc2V0dGluZ3MuZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG4gIF9oaWRlRXJyb3JNZXNzYWdlKGlucHV0KSB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dC5pZH0tZXJyb3JgKTtcclxuICAgIGlucHV0LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3NldHRpbmdzLmVycm9yQ2xhc3MpO1xyXG4gIH1cclxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0KSB7XHJcbiAgICBpbnB1dC52YWxpZGl0eS52YWxpZFxyXG4gICAgICA/IHRoaXMuX2hpZGVFcnJvck1lc3NhZ2UoaW5wdXQpXHJcbiAgICAgIDogdGhpcy5fc2hvd0Vycm9yTWVzc2FnZShpbnB1dCk7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXQpO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9yZXNldFZhbGlkYXRpb24oKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCB7IGNvbmZpZ09iamVjdCwgRm9ybVZhbGlkYXRpb24gfTtcclxuIiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcclxuaW1wb3J0IHsgQ2FyZCB9IGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmRcIjtcclxuaW1wb3J0IHsgU2VjdGlvbiB9IGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb25cIjtcclxuaW1wb3J0IHsgVXNlckluZm8gfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mb1wiO1xyXG5pbXBvcnQgeyBpbml0aWFsQ2FyZHMgfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzXCI7XHJcbmltcG9ydCB7IFBvcHVwV2l0aEZvcm0gfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtXCI7XHJcbmltcG9ydCB7IFBvcHVwV2l0aEltYWdlIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2VcIjtcclxuaW1wb3J0IHsgY2FyZHNTZWN0aW9uLCBjYXJkU2V0dGluZ3MgfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzXCI7XHJcbmltcG9ydCB7IEZvcm1WYWxpZGF0aW9uLCBjb25maWdPYmplY3QgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdGlvbi5qc1wiO1xyXG5cclxuLy9DYXJkIGNyZWF0aW9uIGxvZ2ljXHJcbmNvbnN0IHsgY2FyZHNUZW1wbGF0ZSB9ID0gY2FyZFNldHRpbmdzO1xyXG5jb25zdCBhZGRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idXR0b25cIik7XHJcbmNvbnN0IGNyZWF0ZUNhcmQgPSAoaXRlbSkgPT4ge1xyXG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChpdGVtLCBjYXJkc1RlbXBsYXRlLCAoKSA9PiB7XHJcbiAgICBpbWFnZVBvcHVwLm9wZW4oaXRlbSk7XHJcbiAgfSk7XHJcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkLmdlbmVyYXRlQ2FyZCgpO1xyXG4gIHJldHVybiBjYXJkRWxlbWVudDtcclxufTtcclxuY29uc3QgY2FyZExpc3QgPSBuZXcgU2VjdGlvbihcclxuICB7XHJcbiAgICBkYXRhOiBpbml0aWFsQ2FyZHMsXHJcbiAgICByZW5kZXJlcjogKGl0ZW0pID0+IHtcclxuICAgICAgY29uc3QgY2FyZCA9IGNyZWF0ZUNhcmQoaXRlbSk7XHJcbiAgICAgIGNhcmRMaXN0LnNldEl0ZW0oY2FyZCk7XHJcbiAgICB9LFxyXG4gIH0sXHJcbiAgY2FyZHNTZWN0aW9uXHJcbik7XHJcbmNhcmRMaXN0LnJlbmRlckl0ZW1zKCk7XHJcbmNvbnN0IGFkZENhcmRGb3JtID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIjYWRkSW1hZ2VQb3B1cFwiLCAoKSA9PiB7XHJcbiAgY29uc3QgeyBjYXB0aW9uLCBpbWFnZSB9ID0gYWRkQ2FyZEZvcm0uZ2V0SW5wdXRWYWx1ZXMoKTtcclxuICBjb25zdCBjYXJkRWxlbWVudCA9IGNyZWF0ZUNhcmQoeyBuYW1lOiBjYXB0aW9uLCBsaW5rOiBpbWFnZSB9KTtcclxuICBjYXJkTGlzdC5wcmVwZW5kSXRlbShjYXJkRWxlbWVudCk7XHJcbiAgYWRkQ2FyZEZvcm0uY2xvc2UoKTtcclxufSk7XHJcbmNvbnN0IGltYWdlUG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIucG9wdXBfaW1hZ2VcIik7XHJcbi8vRW5kIG9mIENhcmQgbG9naWNcclxuXHJcbi8vRm9ybSBsb2dpY1xyXG5jb25zdCBmb3JtVmFsaWRhdG9ycyA9IHt9O1xyXG5jb25zdCBlbmFibGVWYWxpZGF0aW9ucyA9IChjb25maWdPYmplY3QpID0+IHtcclxuICBjb25zdCBmb3JtTGlzdCA9IFsuLi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGNvbmZpZ09iamVjdC5mb3JtU2VsZWN0b3IpXTtcclxuICBmb3JtTGlzdC5mb3JFYWNoKChmb3JtKSA9PiB7XHJcbiAgICBjb25zdCBuZXdGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0aW9uKGNvbmZpZ09iamVjdCwgZm9ybSk7XHJcbiAgICBjb25zdCBmb3JtTmFtZSA9IGZvcm0uZ2V0QXR0cmlidXRlKFwibmFtZVwiKTtcclxuICAgIGZvcm1WYWxpZGF0b3JzW2Zvcm1OYW1lXSA9IG5ld0Zvcm1WYWxpZGF0b3I7XHJcbiAgICBuZXdGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuICB9KTtcclxufTtcclxuZW5hYmxlVmFsaWRhdGlvbnMoY29uZmlnT2JqZWN0KTtcclxuLy9FbmQgb2YgRm9ybSBsb2dpY1xyXG5cclxuLy8gY29uc3QgZWRpdFByb2ZpbGVQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZVBvcHVwXCIpO1xyXG5jb25zdCBwcm9maWxlRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZVBvcHVwX19lZGl0LWJ1dHRvblwiKTtcclxuXHJcbi8vUHJvZmlsZSBwb3B1cCAmIFVzZXJJbmZvIGltcGxlbWVudGF0aW9uXHJcbmNvbnN0IHByb2ZpbGUgPSBuZXcgVXNlckluZm8oe1xyXG4gIG5hbWU6IFwiLnByb2ZpbGVfX25hbWVcIixcclxuICBqb2I6IFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIsXHJcbn0pO1xyXG5jb25zdCBwcm9maWxlRm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiI3Byb2ZpbGVQb3B1cFwiLCAoKSA9PiB7XHJcbiAgY29uc3QgeyBmdWxsTmFtZSwgZGVzY3JpcHRpb24gfSA9IHByb2ZpbGVGb3JtLmdldElucHV0VmFsdWVzKCk7XHJcbiAgcHJvZmlsZS5zZXRVZXJJbmZvKHsgbmFtZTogZnVsbE5hbWUsIGpvYjogZGVzY3JpcHRpb24gfSk7XHJcbiAgcHJvZmlsZUZvcm0uY2xvc2UoKTtcclxufSk7XHJcblxyXG5hZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IGFkZENhcmRGb3JtLm9wZW4oKSk7XHJcbnByb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgY29uc3QgeyBuYW1lLCBqb2IgfSA9IHByb2ZpbGUuZ2V0VXNlckluZm8oKTtcclxuICBwcm9maWxlRm9ybS5zZXRJbnB1dFZhbHVlcyh7IGZ1bGxOYW1lOiBuYW1lLCBkZXNjcmlwdGlvbjogam9iIH0pO1xyXG4gIHByb2ZpbGVGb3JtLm9wZW4oKTtcclxufSk7XHJcblxyXG5pbWFnZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbnByb2ZpbGVGb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbmFkZENhcmRGb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiIsImV4cG9ydCBjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3Rvcih7IGRhdGEsIHJlbmRlcmVyIH0sIHNlbGVjdGVkQ29udGFpbmVyKSB7XHJcbiAgICB0aGlzLl9pdGVtcyA9IGRhdGE7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fY29udGFpbmVyID0gc2VsZWN0ZWRDb250YWluZXI7XHJcbiAgfVxyXG4gIHJlbmRlckl0ZW1zKCkge1xyXG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xyXG4gICAgICB0aGlzLl9yZW5kZXJlcihlbGVtZW50KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc2V0SXRlbShlbGVtZW50KSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIuYXBwZW5kKGVsZW1lbnQpO1xyXG4gIH1cclxuICBwcmVwZW5kSXRlbShlbGVtZW50KSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tIFwiLi9Qb3B1cFwiO1xyXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9wb3B1cEltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW1hZ2VcIik7XHJcbiAgICB0aGlzLl9wb3B1cENhcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19jYXB0aW9uXCIpO1xyXG4gIH1cclxuICBvcGVuKHsgbmFtZSwgbGluayB9KSB7XHJcbiAgICB0aGlzLl9wb3B1cEltYWdlLnNyYyA9IGxpbms7XHJcbiAgICB0aGlzLl9wb3B1cEltYWdlLmFsdCA9IG5hbWU7XHJcbiAgICB0aGlzLl9wb3B1cENhcHRpb24udGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgY2xhc3MgVXNlckluZm8ge1xyXG4gIGNvbnN0cnVjdG9yKHsgbmFtZSwgam9iIH0pIHtcclxuICAgIHRoaXMuX25hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWUpO1xyXG4gICAgdGhpcy5fam9iID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihqb2IpO1xyXG4gIH1cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiB7IG5hbWU6IHRoaXMuX25hbWUudGV4dENvbnRlbnQsIGpvYjogdGhpcy5fam9iLnRleHRDb250ZW50IH07XHJcbiAgfVxyXG4gIHNldFVlckluZm8oeyBuYW1lLCBqb2IgfSkge1xyXG4gICAgdGhpcy5fbmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICB0aGlzLl9qb2IudGV4dENvbnRlbnQgPSBqb2I7XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJjYXJkU2V0dGluZ3MiLCJjYXJkc1NlY3Rpb24iLCJjYXJkSW1hZ2VQb3B1cCIsImNhcmRzVGVtcGxhdGUiLCJjYXJkQ2xhc3MiLCJjYXJkSW1hZ2VDbGFzcyIsImNhcmRDYXB0aW9uQ2xhc3MiLCJjYXJkUmVtb3ZlQnV0dG9uIiwiY2FyZExpa2VCdXR0b24iLCJjYXJkTGlrZUJ1dHRvbkFjdGl2ZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsIkNhcmQiLCJjb25zdHJ1Y3RvciIsImRhdGEiLCJ0ZW1wbGF0ZSIsImhhbmRsZUNsaWNrIiwidGhpcyIsIl9oYW5kbGVDbGljayIsIl90ZXh0IiwibmFtZSIsIl9saW5rIiwibGluayIsIl90ZW1wbGF0ZSIsIl9jYXJkIiwiY29udGVudCIsImNsb25lTm9kZSIsIl9saWtlQnV0dG9uIiwiX3JlbW92ZUJ1dHRvbiIsIl9pbWFnZSIsIl90b2dnbGVMaWtlIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJzdG9wUHJvcGFnYXRpb24iLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJfcmVtb3ZlQ2FyZCIsInJlbW92ZUNhcmQiLCJyZW1vdmUiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiZ2VuZXJhdGVDYXJkIiwic3JjIiwiYWx0IiwidGV4dENvbnRlbnQiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJrZXkiLCJjbG9zZSIsIl9wb3B1cCIsIl9jbG9zZUJ1dHRvbiIsIl9pc09wZW4iLCJvcGVuIiwiYWRkIiwiX2hhbmRsZUVzY0Nsb3NlIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJ0YXJnZXQiLCJjdXJyZW50VGFyZ2V0IiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZVN1Ym1pdCIsInN1cGVyIiwiX2hhbmRsZVN1Ym1pdCIsIl9pbnB1dHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiX2Zvcm0iLCJyZXNldCIsImdldElucHV0VmFsdWVzIiwiaW5wdXREYXRhIiwiZm9yRWFjaCIsImlucHV0IiwidmFsdWUiLCJzZXRJbnB1dFZhbHVlcyIsInByZXZlbnREZWZhdWx0IiwiRm9ybVZhbGlkYXRpb24iLCJzZXR0aW5ncyIsImZvcm1FbGVtZW50IiwiX3NldHRpbmdzIiwiX2Zvcm1FbGVtZW50IiwiX3N1Ym1pdCIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2lucHV0TGlzdCIsImlucHV0U2VsZWN0b3IiLCJfZGlzYWJsZUJ1dHRvblN0YXRlIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsInNldEF0dHJpYnV0ZSIsIl9lbmFibGVCdXR0b25TdGF0ZSIsInJlbW92ZUF0dHJpYnV0ZSIsIl9oYXNJbnZhbGlkSW5wdXQiLCJzb21lIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl90b2dnbGVCdXR0b25TdGF0ZSIsIl9yZXNldFZhbGlkYXRpb24iLCJpbnB1dEVsZW1lbnQiLCJfaGlkZUVycm9yTWVzc2FnZSIsIl9zaG93RXJyb3JNZXNzYWdlIiwiZXJyb3JNZXNzYWdlIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJlcnJvckVsZW1lbnQiLCJpZCIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiZW5hYmxlVmFsaWRhdGlvbiIsImFkZEJ1dHRvbiIsImNyZWF0ZUNhcmQiLCJpdGVtIiwiaW1hZ2VQb3B1cCIsImNhcmRMaXN0Iiwic2VsZWN0ZWRDb250YWluZXIiLCJyZW5kZXJlciIsIl9pdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJyZW5kZXJJdGVtcyIsImVsZW1lbnQiLCJzZXRJdGVtIiwiYXBwZW5kIiwicHJlcGVuZEl0ZW0iLCJwcmVwZW5kIiwiY2FyZCIsImFkZENhcmRGb3JtIiwiY2FwdGlvbiIsImltYWdlIiwiY2FyZEVsZW1lbnQiLCJfcG9wdXBJbWFnZSIsIl9wb3B1cENhcHRpb24iLCJmb3JtVmFsaWRhdG9ycyIsImNvbmZpZ09iamVjdCIsImZvcm1TZWxlY3RvciIsImZvcm0iLCJuZXdGb3JtVmFsaWRhdG9yIiwiZm9ybU5hbWUiLCJnZXRBdHRyaWJ1dGUiLCJwcm9maWxlRWRpdEJ1dHRvbiIsInByb2ZpbGUiLCJqb2IiLCJfbmFtZSIsIl9qb2IiLCJnZXRVc2VySW5mbyIsInNldFVlckluZm8iLCJwcm9maWxlRm9ybSIsImZ1bGxOYW1lIiwiZGVzY3JpcHRpb24iXSwic291cmNlUm9vdCI6IiJ9